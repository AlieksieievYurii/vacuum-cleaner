# Bluetooth communication
This document describes how the communication between Rasbperry Pi Zero W and Android App is implemented via BLuetooth.

The entire process of communication is done by sending a JSON texts between two devices(Raspberry Pi and Android App). Each message is called `Packet`.
![image](https://user-images.githubusercontent.com/39415360/135327957-4e9222cf-fe4f-478e-a888-0e3d026f421e.png)

## Packet
This message is a main body which is sent between devices.
``` 
{
  "type": ...,
  "content": ...
}
```
Fields:
* `type` [string] - points which type of a packet it is. The value can be `REQUEST` if this is request from client to server, and `RESPONSE` if this is a packet containing response from a server side.
* `content` [json] - contains the content of request or response.

## Packet as Request
``` 
{
  "type": "REQUEST",
  "content": {
    "request_name": ...,
    "request_id": ...,
    "parameters": ...
  }
}
```
Fields:
* `request_name` [string] - an unique name of a request.
* `request_id` [long] - an unique id of a request. The id must be generated by a client side(who is making request). Later the same id will be used in the response.
* (optional) `parameters` [json] - json object containing required input parameters for given request.

## Packet as Response
``` 
{
  "type": "RESPONSE",
  "content": {
    "request_id": ...,
    "request_name": ...,
    "status": ...,
    "error_message": ...,
    "response": ...
  }
}
```
Fields:
* `request_id` [long] - an unique id that is taken from a correspondent request.
* `request_name` [string] - a request name that is take from a correspondent request.
* `status` [string] - contaning a response status. `OK` - when the request is done successfuly, `ERROR` - the request is failed, `BAD_REQUEST` - when request parameters are bad.
* (optional) `error_message` [string] - if the `status` is `BAD_REQUEST` or `ERROR` this field will be added to the response, containing error message.
* `response` [json] - json object containing output response from the request
